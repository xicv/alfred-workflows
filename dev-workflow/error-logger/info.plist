<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>bundleid</key>
    <string>com.alfredapp.dev.errorlog</string>
    <key>connections</key>
    <dict>
        <key>D57A354B-6B0D-4B7F-9A8C-3B3A4B9C1E2D</key>
        <array>
            <dict>
                <key>destinationuid</key>
                <string>F8E2A4C7-9D1F-4A3E-8B7C-6A5B4C9D2E1F</string>
                <key>modifiers</key>
                <integer>0</integer>
                <key>modifiersubtext</key>
                <string></string>
                <key>vitoclose</key>
                <false/>
            </dict>
        </array>
    </dict>
    <key>createdby</key>
    <string>Development Error Logger</string>
    <key>description</key>
    <string>Auto-generate error logs and send to Claude Code</string>
    <key>disabled</key>
    <false/>
    <key>name</key>
    <string>Dev Error Logger</string>
    <key>objects</key>
    <array>
        <dict>
            <key>config</key>
            <dict>
                <key>argumenttype</key>
                <integer>1</integer>
                <key>keyword</key>
                <string>err</string>
                <key>subtext</key>
                <string>Enter error description or 'auto' for Chrome errors</string>
                <key>text</key>
                <string>Log Development Error</key>
                <key>withspace</key>
                <true/>
            </dict>
            <key>type</key>
            <string>alfred.workflow.input.keyword</string>
            <key>uid</key>
            <string>D57A354B-6B0D-4B7F-9A8C-3B3A4B9C1E2D</string>
            <key>version</key>
            <integer>1</integer>
        </dict>
        <dict>
            <key>config</key>
            <dict>
                <key>concurrently</key>
                <false/>
                <key>escaping</key>
                <integer>102</integer>
                <key>script</key>
                <string>#!/bin/bash

query="{query}"
LOG_DIR="$HOME/Desktop/dev-logs"
mkdir -p "$LOG_DIR"

if [ "$query" = "auto" ]; then
    # Try to get Chrome errors via osascript
    filename="chrome_errors_$(date +%Y%m%d_%H%M%S).log"
    filepath="$LOG_DIR/$filename"

    # Create error log from clipboard (assuming Chrome console errors were copied)
    pbpaste > "$filepath"

    # Add timestamp and context
    echo "" >> "$filepath"
    echo "=== Error logged at $(date) ===" >> "$filepath"
    echo "=== Project: $(pwd | xargs basename) ===" >> "$filepath"

    # Copy file path to clipboard
    echo -n "$filepath" | pbcopy

    # Show notification
    osascript -e "display notification \"Error log created: $filename\" with title \"Dev Error Logger\""

    # Auto-open Claude Code with the file
    if command -v claude &> /dev/null; then
        claude "Analyze this error log and suggest fixes: $filepath"
    fi

    echo "Error log created: $filename"
else
    # Manual error entry
    filename="manual_error_$(date +%Y%m%d_%H%M%S).log"
    filepath="$LOG_DIR/$filename"

    cat > "$filepath" << EOF
Error Description: $query
Timestamp: $(date)
Project: $(pwd | xargs basename)
Working Directory: $(pwd)
============================
Detailed Error Information:
============================

$(pbpaste)

============================
Debug Context:
============================
EOF

    # Copy file path to clipboard
    echo -n "$filepath" | pbcopy

    # Show notification
    osascript -e "display notification \"Error log created: $filename\" with title \"Dev Error Logger\""

    echo "Error log created: $filename"
fi</string>
                <key>scriptargtype</key>
                <integer>0</integer>
                <key>scriptfile</key>
                <string></string>
                <key>type</key>
                <integer>0</integer>
            </dict>
            <key>type</key>
            <string>alfred.workflow.action.script</string>
            <key>uid</key>
            <string>F8E2A4C7-9D1F-4A3E-8B7C-6A5B4C9D2E1F</string>
            <key>version</key>
            <integer>2</integer>
        </dict>
    </array>
    <key>uidata</key>
    <dict>
        <key>D57A354B-6B0D-4B7F-9A8C-3B3A4B9C1E2D</key>
        <dict>
            <key>xpos</key>
            <real>145</real>
            <key>ypos</key>
            <real>145</real>
        </dict>
        <key>F8E2A4C7-9D1F-4A3E-8B7C-6A5B4C9D2E1F</key>
        <dict>
            <key>xpos</key>
            <real>345</real>
            <key>ypos</key>
            <real>145</real>
        </dict>
    </dict>
    <key>version</key>
    <string>1.0</string>
    <key>webaddress</key>
    <string></string>
</dict>
</plist>